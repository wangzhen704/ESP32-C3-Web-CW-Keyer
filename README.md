# ESP32-C3-Web-CW-Keyer

一个基于 **ESP32-C3** 和 **MicroPython** 的简易无线电自动键控器（CW Keyer）。

通过手机或电脑连接 ESP32 的 Wi-Fi 热点，在网页端输入文字或点击常用语按钮，即可驱动电台发射莫斯电码。该项目特别针对 **合宙 LuatOS ESP32-C3 Core** 开发板进行了适配，支持板载双 LED 指示点划状态。

## ✨ 主要功能 (Features)

* **Web 控制界面**：无需安装 App，手机/平板/电脑浏览器直接访问。
* **常用语宏 (Macros)**：内置 CQ 呼叫、信号报告 (RST)、电台介绍 (Rig/Ant)、结束通联 (73) 等常用短语，一键发送。
* **通联日志 (QSO Log)**：网页端实时显示发送日志与时间戳，方便查看通联记录。
* **双 LED 指示**：利用板载 LED 直观显示莫斯电码节奏（D4 显示点，D5 显示划）。
* **光耦隔离**：使用 PC817 光耦物理隔离，保护电台与开发板。
* **速度调节**：支持 5-40 WPM 速度实时调节。

## 🛠️ 硬件清单 (Hardware Requirements)

1. **开发板**：ESP32-C3 (推荐合宙 LuatOS ESP32-C3 Core，引脚定义已适配)。
2. **隔离元件**：PC817 光耦 x 1。
3. **电阻**：220Ω ~ 1kΩ 电阻 x 1 (用于限流)。
4. **连接线**：3.5mm 音频线 (二芯，连接电台 KEY 口)。
5. **其他**：杜邦线、烙铁等。

## 🔌 接线指南 (Wiring Diagram)

针对 **合宙 ESP32-C3 Core** 的引脚连接如下：

| ESP32-C3 引脚 | 连接元件 | 目标连接 | 备注 |
| --- | --- | --- | --- |
| **GPIO 06** | 电阻 (220Ω) | PC817 Pin 1 (阳极) | 控制信号输出 |
| **GND** | 直连 | PC817 Pin 2 (阴极) | **地线 ** |
| **PC817 Pin 4** | 直连 | 3.5mm 插头 **尖端 (Tip)** | 接电台正极 |
| **PC817 Pin 3** | 直连 | 3.5mm 插头 **根部 (Sleeve)** | 接电台地线 |


## 💻 软件安装 (Installation)

1. **刷入固件**：
* 下载适用于 ESP32-C3 的 [MicroPython 固件](https://micropython.org/download/esp32c3/)。
* 使用 Thonny 或 `esptool` 将固件刷入开发板。


2. **上传代码**：
* 将本仓库中的 `main.py` 下载到本地。
* 使用 Thonny 连接开发板。
* 在代码顶部的 `用户配置区域` 修改你的呼号：
```python
MY_CALLSIGN = "YOUR_CALLSIGN" # 修改为你的呼号

```


* 将文件保存到 ESP32 设备根目录，命名为 `main.py`。


3. **重启**：
* 按下板子上的 RST 键或重新上电。



## 🚀 使用方法 (Usage)

1. **连接 Wi-Fi**：
* 手机搜索并连接热点：`ESP_Keyer`
* 默认密码：`12345678`


2. **访问网页**：
* 打开浏览器，访问地址：`192.168.4.1`


3. **开始通联**：
* **日志区**：顶部黑色区域显示发送历史。
* **输入区**：手动输入任意英文/数字内容。
* **按钮区**：点击 `CQ MACRO`、`RST 599` 等按钮快速发送。
* **TX 按钮**：点击底部绿色的 `TX (SEND)` 发送数据。



## 📝 常用语自定义

你可以在 `main.py` 的 `HTML_PAGE` 部分自定义网页按钮的功能。例如修改名字：

```javascript
// 找到这一行并修改
<button class="btn btn-rst" onclick="add('OP NAME IS ZHEN')">NAME</button>

```

## ⚠️ 注意事项

* 请确保电台已开启 **Break-in (BK)** 模式，以便实现自动发射。
* 3.5mm 插头的接线极性极为重要，接反将无法触发电台。
* 板载 LED (D4/D5) 默认为低电平点亮，如使用其他开发板请在代码中调整 `LED_ON` 值。

## 🤝 贡献与致谢

本项目由 **BI1PRR** 开发及维护。

特别感谢开源社区提供的 MicroPython 支持。
GL & 73!
